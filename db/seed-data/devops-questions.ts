import { SeedQuestion } from "./types";

export const devopsQuestions: SeedQuestion[] = [
  // 简单题（2题）
  {
    content: "在 Webpack 构建中，Loader 和 Plugin 的区别是？",
    type: "single",
    options: {
      A: "没有区别",
      B: "Loader 用于转换文件（如 less 转 css），Plugin 用于扩展构建功能（如压缩、注入环境变量）",
      C: "Loader 运行在打包后，Plugin 运行在打包前",
      D: "Plugin 只能处理 JS 文件",
    },
    correctAnswer: ["B"],
    abilityDimension: "devops",
    difficulty: "easy",
    weight: 1,
    applicableRoles: ["frontend"],
    applicableLanguages: null,
    explanation: "Loader是模块转换器，用于处理不同类型的文件资源（如将SCSS转为CSS）。Plugin是功能扩展器，可以在Webpack构建流程的各个生命周期钩子中注入自定义逻辑，实现诸如打包优化、资源管理等复杂功能。",
  },
  {
    content: "线上服务 CPU 飙高，使用 top -H -p <pid> 命令的目的是？",
    type: "single",
    options: {
      A: "查看该进程打开的文件句柄",
      B: "查看该进程下的所有线程的 CPU 占用情况",
      C: "强制杀死进程",
      D: "查看网络连接数",
    },
    correctAnswer: ["B"],
    abilityDimension: "devops",
    difficulty: "easy",
    weight: 1,
    applicableRoles: ["backend"],
    applicableLanguages: null,
    explanation: "B对：top -H -p <pid>命令可以查看指定进程内各个线程的详细信息，包括CPU占用率，是定位Java程序中\"某个线程CPU占满\"问题的第一步。A错：查看文件句柄用lsof。C错：杀死进程用kill。D错：查看网络连接用netstat或ss。",
  },

  // 新增题目 - easy (6题，含1题简答)
  {
    content: "在部署应用时，你发现服务器磁盘空间不足。以下哪个命令可以快速找出占用空间最大的目录？",
    type: "single",
    options: {
      A: "ls -lh",
      B: "du -sh /* | sort -rh | head -10",
      C: "df -h",
      D: "free -m",
    },
    correctAnswer: ["B"],
    abilityDimension: "devops",
    difficulty: "easy",
    weight: 1,
    applicableRoles: ["backend"],
    applicableLanguages: null,
    explanation: "B对：du -sh查看目录大小，sort -rh逆序排序，head取前10个，可以快速找出占用空间最大的目录。A错：ls只能查看当前目录文件。C错：df查看文件系统使用情况，不能定位具体目录。D错：free查看内存使用情况。",
  },
  {
    content: "在排查线上问题时，你需要查看应用最近1小时的错误日志。以下哪个命令最合适？",
    type: "single",
    options: {
      A: "cat error.log",
      B: "tail -f error.log",
      C: "grep 'ERROR' error.log | tail -100",
      D: "grep 'ERROR' error.log | grep '$(date -d \"1 hour ago\" +\"%Y-%m-%d %H\")'",
    },
    correctAnswer: ["D"],
    abilityDimension: "devops",
    difficulty: "easy",
    weight: 1,
    applicableRoles: ["backend"],
    applicableLanguages: null,
    explanation: "D对：结合grep和date命令可以筛选出最近1小时的错误日志。A错：会输出全部日志，数据量大。B错：tail -f是实时查看，不是查看历史。C错：只查看最后100行，可能不是最近1小时的数据。",
  },
  {
    content: "在使用 Docker 部署应用时，以下哪种方式可以保证容器重启后数据不丢失？",
    type: "single",
    options: {
      A: "将数据存储在容器内部",
      B: "使用 Docker Volume 挂载数据目录",
      C: "不挂载任何目录，数据存储在内存中",
      D: "每次重启都重新创建数据",
    },
    correctAnswer: ["B"],
    abilityDimension: "devops",
    difficulty: "easy",
    weight: 1,
    applicableRoles: ["backend"],
    applicableLanguages: null,
    explanation: "B对：Docker Volume可以将容器内的目录挂载到宿主机，保证数据持久化。A错：容器删除后数据会丢失。C错：内存数据重启后会丢失。D错：不符合需求。",
  },
  {
    content: "在配置 CI/CD 流水线时，以下哪个阶段应该在代码提交后自动触发？",
    type: "single",
    options: {
      A: "代码编译和单元测试",
      B: "生产环境部署",
      C: "手动触发所有步骤",
      D: "只进行代码检查，不运行测试",
    },
    correctAnswer: ["A"],
    abilityDimension: "devops",
    difficulty: "easy",
    weight: 1,
    applicableRoles: ["backend", "frontend", "fullstack"],
    applicableLanguages: null,
    explanation: "A对：代码提交后应该自动触发编译和测试，确保代码质量。B错：生产环境部署需要人工审核，不应该自动触发。C错：CI/CD的目的就是自动化。D错：测试是必要的，不能省略。",
  },
  {
    content: "在排查网络问题时，你需要测试服务器是否可以访问某个外部API。以下哪个命令最合适？",
    type: "single",
    options: {
      A: "ping api.example.com",
      B: "curl -I https://api.example.com",
      C: "ls -la",
      D: "ps aux",
    },
    correctAnswer: ["B"],
    abilityDimension: "devops",
    difficulty: "easy",
    weight: 1,
    applicableRoles: ["backend"],
    applicableLanguages: null,
    explanation: "B对：curl可以测试HTTP/HTTPS接口的连通性，-I只获取响应头，速度快。A错：ping只能测试网络连通性，不能测试HTTP服务。C/D错：与网络测试无关。",
  },
  {
    content: "你在线上环境发现服务突然响应变慢，用户反馈访问超时。请描述排查思路和常用命令。",
    type: "essay",
    options: null,
    correctAnswer: null,
    abilityDimension: "devops",
    difficulty: "easy",
    weight: 5,
    applicableRoles: ["backend"],
    applicableLanguages: null,
    explanation: "本题考察线上问题排查能力。",
    referenceAnswer: "排查思路：1）确认问题范围：是单个服务还是所有服务，是特定接口还是所有接口；2）检查系统资源：CPU、内存、磁盘、网络是否正常；3）检查应用日志：查看错误日志、慢查询日志，定位具体错误；4）检查依赖服务：数据库、Redis、消息队列等是否正常；5）检查网络：是否存在网络延迟或丢包。常用命令：1）系统资源：top/htop查看CPU和内存，df -h查看磁盘，free -m查看内存，iostat查看IO；2）进程和线程：ps aux查看进程，top -H -p <pid>查看线程，jstack <pid>查看Java线程栈；3）网络：netstat -anp查看连接，ss -tuln查看监听端口，tcpdump抓包分析；4）日志：tail -f查看实时日志，grep过滤关键字，less分页查看；5）应用相关：jmap查看内存，jstat查看GC，curl测试接口。示例场景：响应变慢可能是数据库慢查询导致，使用show processlist查看正在执行的SQL，使用EXPLAIN分析慢查询，优化SQL或添加索引。评分标准：排查思路清晰（2分），列出5个以上常用命令（2分），有具体排查场景（1分）。",
  },

  // 新增题目 - medium (4题，含1题简答)
  {
    content: "在使用 Docker Compose 编排多个服务时，以下哪些配置是合理的？",
    type: "multiple",
    options: {
      A: "使用 depends_on 定义服务依赖关系",
      B: "使用 volumes 挂载配置文件和数据目录",
      C: "为每个服务设置 resource limits 限制资源使用",
      D: "所有服务使用同一个网络，方便通信",
    },
    correctAnswer: ["A", "B", "C", "D"],
    abilityDimension: "devops",
    difficulty: "medium",
    weight: 1,
    applicableRoles: ["backend"],
    applicableLanguages: null,
    explanation: "A对：depends_on可以确保服务启动顺序。B对：volumes可以持久化数据和配置。C对：resource limits可以防止某个服务占用过多资源。D对：同一网络内的服务可以通过服务名通信。",
  },
  {
    content: "在配置 Kubernetes 部署时，需要考虑哪些方面来保证服务的高可用？",
    type: "multiple",
    options: {
      A: "设置多个副本（replicas），保证服务冗余",
      B: "配置健康检查（livenessProbe和readinessProbe）",
      C: "使用 Service 和 Ingress 实现负载均衡",
      D: "配置资源限制（resources limits和requests）",
    },
    correctAnswer: ["A", "B", "C", "D"],
    abilityDimension: "devops",
    difficulty: "medium",
    weight: 1,
    applicableRoles: ["backend"],
    applicableLanguages: null,
    explanation: "A对：多副本可以保证服务高可用，单个Pod故障不影响服务。B对：健康检查可以自动重启不健康的Pod。C对：Service和Ingress可以实现负载均衡和流量分发。D对：资源限制可以防止Pod占用过多资源，影响其他服务。",
  },
  {
    content: "在搭建监控告警系统时，以下哪些指标是关键的？",
    type: "multiple",
    options: {
      A: "CPU使用率和内存使用率",
      B: "接口响应时间和错误率",
      C: "数据库连接数和慢查询数",
      D: "磁盘使用率和网络流量",
    },
    correctAnswer: ["A", "B", "C", "D"],
    abilityDimension: "devops",
    difficulty: "medium",
    weight: 1,
    applicableRoles: ["backend", "fullstack"],
    applicableLanguages: null,
    explanation: "A对：系统资源指标可以反映服务器负载。B对：应用性能指标直接反映用户体验。C对：数据库指标可以反映数据层健康状态。D对：基础设施指标可以反映系统整体状态。",
  },
  {
    content: "你需要将一个Spring Boot应用进行Docker化部署，包括编写Dockerfile和配置容器编排。请设计部署方案。",
    type: "essay",
    options: null,
    correctAnswer: null,
    abilityDimension: "devops",
    difficulty: "medium",
    weight: 5,
    applicableRoles: ["backend", "fullstack"],
    applicableLanguages: null,
    explanation: "本题考察Docker化部署和容器编排能力。",
    referenceAnswer: "Dockerfile设计：FROM openjdk:11-jre-slim，WORKDIR /app，COPY target/app.jar app.jar，EXPOSE 8080，ENTRYPOINT [\"java\", \"-jar\", \"app.jar\"]。优化建议：1）使用多阶段构建减小镜像体积；2）使用非root用户运行；3）设置健康检查HEALTHCHECK；4）合理设置JVM参数。Docker Compose编排：version: '3.8'，services: app: build: .，ports: - \"8080:8080\"，environment: - SPRING_PROFILES_ACTIVE=prod，volumes: - ./logs:/app/logs，depends_on: - mysql - redis，restart: always。mysql: image: mysql:8.0，environment: MYSQL_ROOT_PASSWORD: password，volumes: - mysql_data:/var/lib/mysql。redis: image: redis:alpine，volumes: - redis_data:/data。volumes: mysql_data, redis_data。生产环境考虑：1）使用Kubernetes进行容器编排，支持自动扩缩容；2）配置ConfigMap和Secret管理配置和敏感信息；3）使用Service和Ingress实现负载均衡；4）配置资源限制和健康检查；5）使用持久化存储保证数据安全；6）配置监控和日志收集。评分标准：Dockerfile编写正确（2分），Docker Compose配置合理（1分），考虑生产环境优化（1分），方案完整可落地（1分）。",
  },

  // 新增题目 - hard (2题，含1题简答)
  {
    content: "在设计微服务系统的监控告警方案时，需要考虑哪些关键指标和告警策略？",
    type: "multiple",
    options: {
      A: "服务可用性指标（如99.9%可用性）",
      B: "接口性能指标（响应时间、QPS、错误率）",
      C: "系统资源指标（CPU、内存、磁盘、网络）",
      D: "业务指标（订单量、支付成功率等）",
    },
    correctAnswer: ["A", "B", "C", "D"],
    abilityDimension: "devops",
    difficulty: "hard",
    weight: 1,
    applicableRoles: ["backend", "fullstack"],
    applicableLanguages: null,
    explanation: "A对：服务可用性是SLA的核心指标。B对：接口性能直接影响用户体验。C对：系统资源可以反映基础设施健康状态。D对：业务指标可以反映业务健康状态。",
  },
  {
    content: "你需要设计一个微服务系统的监控告警方案，请说明关键指标和告警策略。",
    type: "essay",
    options: null,
    correctAnswer: null,
    abilityDimension: "devops",
    difficulty: "hard",
    weight: 5,
    applicableRoles: ["backend", "fullstack"],
    applicableLanguages: null,
    explanation: "本题考察大规模系统的监控告警设计能力。",
    referenceAnswer: "监控体系设计：1）基础设施监控：使用Prometheus+Grafana监控服务器CPU、内存、磁盘、网络等指标，告警阈值：CPU>80%持续5分钟、内存>85%、磁盘>90%；2）应用监控：使用APM工具（如SkyWalking、Pinpoint）监控接口响应时间、QPS、错误率，告警阈值：响应时间P99>1s、错误率>1%、QPS突降50%；3）中间件监控：监控MySQL连接数、慢查询、Redis内存使用、消息队列堆积等，告警阈值：数据库连接数>80%、慢查询>10条/分钟、Redis内存>90%；4）业务监控：监控订单量、支付成功率、用户活跃度等业务指标，告警阈值：订单量突降30%、支付成功率<95%。告警策略：1）分级告警：P0（立即处理，如服务宕机）、P1（1小时内处理，如错误率上升）、P2（4小时内处理，如资源使用率偏高）；2）告警收敛：相同告警5分钟内只发送一次，避免告警风暴；3）告警路由：根据服务重要性路由到不同告警组，关键服务告警发送到值班群；4）告警恢复：问题解决后自动发送恢复通知；5）告警分析：定期分析告警趋势，优化告警规则。技术选型：Prometheus（指标收集）+ Grafana（可视化）+ AlertManager（告警管理）+ 企业微信/钉钉（告警通知）。评分标准：监控体系完整（2分），告警策略合理（1分），有分级和收敛机制（1分），技术选型合理（1分）。",
  },

  // 新增题目 - frontend角色 (18题：12 easy + 6 medium)
  {
    content: "在使用Webpack构建前端项目时，以下哪些配置可以优化打包体积？",
    type: "multiple",
    options: {
      A: "启用Tree Shaking，移除未使用的代码",
      B: "使用代码分割（Code Splitting），按需加载",
      C: "将所有依赖都打包进主bundle",
      D: "压缩和混淆代码",
    },
    correctAnswer: ["A", "B", "D"],
    abilityDimension: "devops",
    difficulty: "easy",
    weight: 1,
    applicableRoles: ["frontend"],
    applicableLanguages: null,
    explanation: "A/B/D对：Tree Shaking、代码分割、压缩混淆都是优化打包体积的有效手段。C错：全部打包会增加体积。",
  },
  {
    content: "在配置前端项目的CI/CD流程时，以下哪些步骤是必要的？",
    type: "multiple",
    options: {
      A: "代码编译和构建",
      B: "运行单元测试和集成测试",
      C: "代码质量检查（ESLint、Prettier）",
      D: "自动部署到生产环境（需要人工审核）",
    },
    correctAnswer: ["A", "B", "C"],
    abilityDimension: "devops",
    difficulty: "easy",
    weight: 1,
    applicableRoles: ["frontend"],
    applicableLanguages: null,
    explanation: "A/B/C对：编译构建、测试、代码检查是CI的必要步骤。D错：生产环境部署需要人工审核，不应该自动触发。",
  },
  {
    content: "在部署前端项目到生产环境时，以下哪些优化措施是必要的？",
    type: "multiple",
    options: {
      A: "使用CDN加速静态资源加载",
      B: "启用Gzip/Brotli压缩",
      C: "配置缓存策略，设置合理的缓存时间",
      D: "将所有文件都设置为不缓存",
    },
    correctAnswer: ["A", "B", "C"],
    abilityDimension: "devops",
    difficulty: "easy",
    weight: 1,
    applicableRoles: ["frontend"],
    applicableLanguages: null,
    explanation: "A/B/C对：CDN、压缩、缓存都是生产环境优化的重要手段。D错：合理缓存可以提升性能。",
  },
  {
    content: "在配置前端项目的环境变量时，以下哪种方式最安全？",
    type: "single",
    options: {
      A: "将敏感信息（如API密钥）直接写在代码中",
      B: "使用环境变量文件（.env），不提交到代码仓库",
      C: "将所有配置都写在HTML中",
      D: "不进行任何配置管理",
    },
    correctAnswer: ["B"],
    abilityDimension: "devops",
    difficulty: "easy",
    weight: 1,
    applicableRoles: ["frontend"],
    applicableLanguages: null,
    explanation: "B对：环境变量文件可以管理配置，且不提交敏感信息到仓库。A错：敏感信息泄露风险。C错：配置写在HTML中不安全。D错：需要配置管理。",
  },
  {
    content: "在使用Docker部署前端应用时，以下哪些配置是合理的？",
    type: "multiple",
    options: {
      A: "使用多阶段构建，减小镜像体积",
      B: "使用Nginx作为Web服务器，提供静态文件服务",
      C: "将所有源代码都打包进镜像",
      D: "配置健康检查，监控应用状态",
    },
    correctAnswer: ["A", "B", "D"],
    abilityDimension: "devops",
    difficulty: "easy",
    weight: 1,
    applicableRoles: ["frontend"],
    applicableLanguages: null,
    explanation: "A/B/D对：多阶段构建、Nginx服务、健康检查都是Docker部署的最佳实践。C错：只需要打包后的文件，不需要源代码。",
  },
  {
    content: "在配置前端项目的错误监控时，以下哪些工具是常用的？",
    type: "multiple",
    options: {
      A: "Sentry - 捕获前端错误和性能问题",
      B: "Google Analytics - 分析用户行为",
      C: "不进行错误监控，避免影响性能",
      D: "自建错误日志系统",
    },
    correctAnswer: ["A", "B", "D"],
    abilityDimension: "devops",
    difficulty: "easy",
    weight: 1,
    applicableRoles: ["frontend"],
    applicableLanguages: null,
    explanation: "A/B/D对：Sentry、GA、自建系统都是常见的监控方案。C错：错误监控是必要的，且对性能影响很小。",
  },
  {
    content: "在配置前端项目的性能监控时，以下哪些指标是重要的？",
    type: "multiple",
    options: {
      A: "首屏加载时间（FCP、LCP）",
      B: "页面交互响应时间（FID、CLS）",
      C: "JavaScript执行时间",
      D: "只关注页面加载时间，不关注交互",
    },
    correctAnswer: ["A", "B", "C"],
    abilityDimension: "devops",
    difficulty: "easy",
    weight: 1,
    applicableRoles: ["frontend"],
    applicableLanguages: null,
    explanation: "A/B/C对：FCP、LCP、FID、CLS、JS执行时间都是重要的性能指标。D错：交互性能同样重要。",
  },
  {
    content: "在配置前端项目的自动化测试时，以下哪些测试类型是必要的？",
    type: "multiple",
    options: {
      A: "单元测试 - 测试组件和工具函数",
      B: "集成测试 - 测试组件交互",
      C: "E2E测试 - 测试完整用户流程",
      D: "不进行任何测试，直接部署",
    },
    correctAnswer: ["A", "B", "C"],
    abilityDimension: "devops",
    difficulty: "easy",
    weight: 1,
    applicableRoles: ["frontend"],
    applicableLanguages: null,
    explanation: "A/B/C对：单元测试、集成测试、E2E测试都是前端测试的重要组成部分。D错：测试是保证质量的重要手段。",
  },
  {
    content: "在配置前端项目的代码质量检查时，以下哪些工具是常用的？",
    type: "multiple",
    options: {
      A: "ESLint - 检查JavaScript/TypeScript代码规范",
      B: "Prettier - 统一代码格式",
      C: "Stylelint - 检查CSS代码规范",
      D: "不进行代码检查，相信开发者",
    },
    correctAnswer: ["A", "B", "C"],
    abilityDimension: "devops",
    difficulty: "easy",
    weight: 1,
    applicableRoles: ["frontend"],
    applicableLanguages: null,
    explanation: "A/B/C对：ESLint、Prettier、Stylelint都是前端代码质量检查的常用工具。D错：代码检查是必要的。",
  },
  {
    content: "在配置前端项目的版本管理时，以下哪些实践是合理的？",
    type: "multiple",
    options: {
      A: "使用语义化版本号（Semantic Versioning）",
      B: "使用Git标签标记发布版本",
      C: "每次提交都创建一个新版本",
      D: "实现版本回滚机制，支持快速回退",
    },
    correctAnswer: ["A", "B", "D"],
    abilityDimension: "devops",
    difficulty: "easy",
    weight: 1,
    applicableRoles: ["frontend"],
    applicableLanguages: null,
    explanation: "A/B/D对：语义化版本、Git标签、版本回滚都是版本管理的最佳实践。C错：应该按功能或修复创建版本。",
  },
  {
    content: "在配置前端项目的构建优化时，以下哪些措施是有效的？",
    type: "multiple",
    options: {
      A: "使用缓存加速构建，避免重复编译",
      B: "并行处理任务，提升构建速度",
      C: "每次构建都清理所有缓存",
      D: "使用增量构建，只编译变更的文件",
    },
    correctAnswer: ["A", "B", "D"],
    abilityDimension: "devops",
    difficulty: "easy",
    weight: 1,
    applicableRoles: ["frontend"],
    applicableLanguages: null,
    explanation: "A/B/D对：构建缓存、并行处理、增量构建都是提升构建速度的有效手段。C错：清理缓存会降低构建速度。",
  },
  {
    content: "在配置前端项目的安全策略时，以下哪些措施是必要的？",
    type: "multiple",
    options: {
      A: "使用HTTPS加密传输",
      B: "配置CSP（Content Security Policy）防止XSS攻击",
      C: "不进行任何安全配置，相信浏览器",
      D: "实现CORS策略，控制跨域访问",
    },
    correctAnswer: ["A", "B", "D"],
    abilityDimension: "devops",
    difficulty: "easy",
    weight: 1,
    applicableRoles: ["frontend"],
    applicableLanguages: null,
    explanation: "A/B/D对：HTTPS、CSP、CORS都是前端安全的重要措施。C错：需要主动配置安全策略。",
  },
  {
    content: "在配置前端项目的多环境部署时，以下哪些实践是合理的？",
    type: "multiple",
    options: {
      A: "使用环境变量区分开发、测试、生产环境",
      B: "为不同环境配置不同的API地址",
      C: "所有环境使用相同的配置",
      D: "实现环境隔离，避免环境间相互影响",
    },
    correctAnswer: ["A", "B", "D"],
    abilityDimension: "devops",
    difficulty: "medium",
    weight: 1,
    applicableRoles: ["frontend"],
    applicableLanguages: null,
    explanation: "A/B/D对：环境变量、不同API地址、环境隔离都是多环境部署的最佳实践。C错：不同环境需要不同配置。",
  },
  {
    content: "在配置前端项目的持续集成流程时，以下哪些步骤是必要的？",
    type: "multiple",
    options: {
      A: "代码提交后自动触发构建和测试",
      B: "测试通过后自动部署到测试环境",
      C: "实现代码审查（Code Review）流程",
      D: "每次提交都直接部署到生产环境",
    },
    correctAnswer: ["A", "B", "C"],
    abilityDimension: "devops",
    difficulty: "medium",
    weight: 1,
    applicableRoles: ["frontend"],
    applicableLanguages: null,
    explanation: "A/B/C对：自动构建测试、自动部署测试环境、代码审查都是CI的必要步骤。D错：生产环境部署需要人工审核。",
  },
  {
    content: "在配置前端项目的性能优化时，以下哪些方案是有效的？",
    type: "multiple",
    options: {
      A: "使用HTTP/2多路复用，提升加载速度",
      B: "实现资源预加载（Preload）和预连接（Preconnect）",
      C: "使用Service Worker实现离线缓存",
      D: "将所有资源都设置为不缓存",
    },
    correctAnswer: ["A", "B", "C"],
    abilityDimension: "devops",
    difficulty: "medium",
    weight: 1,
    applicableRoles: ["frontend"],
    applicableLanguages: null,
    explanation: "A/B/C对：HTTP/2、预加载、Service Worker都是性能优化的有效方案。D错：合理缓存可以提升性能。",
  },
  {
    content: "在配置前端项目的监控告警时，以下哪些指标需要设置告警？",
    type: "multiple",
    options: {
      A: "错误率超过阈值（如>1%）",
      B: "页面加载时间超过阈值（如>3秒）",
      C: "API请求失败率超过阈值",
      D: "不设置任何告警，避免打扰",
    },
    correctAnswer: ["A", "B", "C"],
    abilityDimension: "devops",
    difficulty: "medium",
    weight: 1,
    applicableRoles: ["frontend"],
    applicableLanguages: null,
    explanation: "A/B/C对：错误率、加载时间、API失败率都是需要监控和告警的关键指标。D错：告警是必要的，可以及时发现问题。",
  },
  {
    content: "在配置前端项目的灰度发布时，以下哪些方案是可行的？",
    type: "multiple",
    options: {
      A: "使用CDN配置，按地区或用户比例分发新版本",
      B: "使用Feature Flag控制功能开关",
      C: "直接全量发布，不进行灰度",
      D: "使用A/B测试验证新版本效果",
    },
    correctAnswer: ["A", "B", "D"],
    abilityDimension: "devops",
    difficulty: "medium",
    weight: 1,
    applicableRoles: ["frontend"],
    applicableLanguages: null,
    explanation: "A/B/D对：CDN分发、Feature Flag、A/B测试都是灰度发布的常见方案。C错：全量发布风险大。",
  },
  {
    content: "你在开发一个大型前端项目，需要配置完整的CI/CD流程。请设计一个从代码提交到生产部署的完整流程，包括构建、测试、部署等环节。",
    type: "essay",
    options: null,
    correctAnswer: null,
    abilityDimension: "devops",
    difficulty: "medium",
    weight: 5,
    applicableRoles: ["frontend"],
    applicableLanguages: null,
    explanation: "本题考察前端CI/CD流程设计能力。",
    referenceAnswer: "CI流程设计：1）代码提交触发：配置Git Hook或Webhook，代码推送到特定分支（如develop、main）时自动触发；2）代码检查：运行ESLint、Prettier检查代码规范，运行TypeScript类型检查；3）单元测试：运行Jest/Vitest单元测试，要求覆盖率>80%；4）构建：运行npm run build，生成生产环境代码；5）集成测试：运行E2E测试（如Playwright、Cypress），验证核心功能。CD流程设计：1）测试环境部署：CI通过后自动部署到测试环境，通知测试团队；2）代码审查：提交PR，团队成员审查代码；3）预发布环境：合并到release分支后部署到预发布环境，进行最终验证；4）生产部署：通过预发布验证后，手动触发生产部署（或配置自动部署但需要审批）；5）回滚机制：配置快速回滚，出现问题立即回退到上一版本。优化措施：1）使用构建缓存，加速CI流程；2）并行执行测试任务；3）实现增量部署，只部署变更的文件；4）配置健康检查，部署后自动验证。评分标准：CI流程完整（2分），CD流程合理（1分），考虑回滚和优化（1分），方案实用可落地（1分）。",
  },

  // 新增题目 - backend角色 devops (7题：5 easy + 2 medium)
  {
    content: "在排查生产环境问题时，你发现某个接口响应很慢。以下哪些排查方法是合理的？",
    type: "multiple",
    options: {
      A: "查看应用日志，定位慢请求",
      B: "使用APM工具（如SkyWalking）分析接口性能",
      C: "检查数据库慢查询日志",
      D: "不进行排查，直接重启服务",
    },
    correctAnswer: ["A", "B", "C"],
    abilityDimension: "devops",
    difficulty: "easy",
    weight: 1,
    applicableRoles: ["backend"],
    applicableLanguages: null,
    explanation: "A/B/C对：查看日志、APM分析、慢查询检查都是性能问题排查的常用方法。D错：重启服务不能解决根本问题。",
  },
  {
    content: "在配置Spring Boot应用的日志时，以下哪些配置是合理的？",
    type: "multiple",
    options: {
      A: "使用Logback或Log4j2作为日志框架",
      B: "区分日志级别，生产环境使用INFO级别",
      C: "配置日志文件大小和轮转策略",
      D: "将所有日志都输出到控制台",
    },
    correctAnswer: ["A", "B", "C"],
    abilityDimension: "devops",
    difficulty: "easy",
    weight: 1,
    applicableRoles: ["backend"],
    applicableLanguages: ["java"],
    explanation: "A/B/C对：日志框架、日志级别、日志轮转都是日志配置的最佳实践。D错：生产环境应该输出到文件。",
  },
  {
    content: "在配置Spring Boot应用的健康检查时，以下哪些端点是有用的？",
    type: "multiple",
    options: {
      A: "/actuator/health - 检查应用健康状态",
      B: "/actuator/metrics - 查看应用指标",
      C: "/actuator/info - 查看应用信息",
      D: "不配置健康检查，相信应用总是健康的",
    },
    correctAnswer: ["A", "B", "C"],
    abilityDimension: "devops",
    difficulty: "easy",
    weight: 1,
    applicableRoles: ["backend"],
    applicableLanguages: ["java"],
    explanation: "A/B/C对：health、metrics、info都是Spring Boot Actuator提供的有用端点。D错：健康检查是必要的。",
  },
  {
    content: "在配置Spring Boot应用的多环境配置时，以下哪种方式最合适？",
    type: "single",
    options: {
      A: "将所有环境的配置都写在application.properties中",
      B: "使用application-{profile}.yml区分不同环境配置",
      C: "使用硬编码的方式配置环境变量",
      D: "不进行环境配置，使用默认配置",
    },
    correctAnswer: ["B"],
    abilityDimension: "devops",
    difficulty: "easy",
    weight: 1,
    applicableRoles: ["backend"],
    applicableLanguages: ["java"],
    explanation: "B对：使用profile区分环境配置是Spring Boot的标准做法。A错：所有环境配置混在一起难以管理。C错：硬编码不灵活。D错：需要环境配置。",
  },
  {
    content: "在配置Spring Boot应用的性能监控时，以下哪些指标是重要的？",
    type: "multiple",
    options: {
      A: "接口响应时间（P50、P95、P99）",
      B: "JVM内存使用情况（堆内存、非堆内存）",
      C: "GC频率和耗时",
      D: "只关注接口是否可用，不关注性能",
    },
    correctAnswer: ["A", "B", "C"],
    abilityDimension: "devops",
    difficulty: "easy",
    weight: 1,
    applicableRoles: ["backend"],
    applicableLanguages: ["java"],
    explanation: "A/B/C对：响应时间、内存使用、GC情况都是Java应用性能监控的重要指标。D错：性能监控是必要的。",
  },
  {
    content: "在配置Spring Boot应用的线程池时，以下哪些参数是重要的？",
    type: "multiple",
    options: {
      A: "核心线程数（corePoolSize）",
      B: "最大线程数（maximumPoolSize）",
      C: "队列容量（queueCapacity）",
      D: "不配置线程池，使用默认配置",
    },
    correctAnswer: ["A", "B", "C"],
    abilityDimension: "devops",
    difficulty: "medium",
    weight: 1,
    applicableRoles: ["backend"],
    applicableLanguages: ["java"],
    explanation: "A/B/C对：核心线程数、最大线程数、队列容量都是线程池配置的关键参数。D错：需要根据业务场景配置线程池。",
  },
  {
    content: "在配置Spring Boot应用的数据库连接池时，以下哪些参数是重要的？",
    type: "multiple",
    options: {
      A: "最大连接数（maxActive）",
      B: "最小空闲连接数（minIdle）",
      C: "连接超时时间（connectionTimeout）",
      D: "不配置连接池，使用默认配置",
    },
    correctAnswer: ["A", "B", "C"],
    abilityDimension: "devops",
    difficulty: "medium",
    weight: 1,
    applicableRoles: ["backend"],
    applicableLanguages: ["java"],
    explanation: "A/B/C对：最大连接数、最小空闲连接数、连接超时时间都是连接池配置的关键参数。D错：需要根据业务场景配置连接池。",
  },
];
